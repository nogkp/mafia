import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) return m.reply("- ใ๐ปใ ูู ุชุธู ุฃููู ุฃูุฑุฃ ุงูุนูููุ ุงูุชุจ ุดูุฆูุง ุจุนุฏ ุงูุฃูุฑ.\nูุซุงู:\nโฃ .ูุจุฑูุฌ ุดุฑุญ ุงูู JS โฃ\n*.ูุจุฑูุฌ* ุงูุชุจ ุฑูุฒ JS");

  await m.reply("... ุงูุชุธุฑ ูุญุธุฉุ ุณุฃุจุญุซ ูู ุนู ุฃูุถู ุงูุฅุฌุงุจุงุช.");

  try {
    let result = await CleanDx(text);
    await m.reply(`*โฎโโโโโโโ๐ปโโโโโโโ๐ง*\nใ ๐จโ๐ป ใ${result}\n*โฏโโโโโโโ๐ปโโโโโโโ๐ง*`);
  } catch (e) {
    await m.reply("ใ ๐จโ๐ป ใุฃุนุชุฐุฑุ ูู ุฃุชููู ูู ุงูุญุตูู ุนูู ุงููุนูููุงุช.");
  }
};

handler.help = ["ูุจุฑูุฌ"];
handler.tags = ["ai"];
handler.command = /^(ูุจุฑูุฌ)$/i;

export default handler;

async function CleanDx(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";
  
  // ุชูุฌูู ุงูู API ููููู ูุจุฑูุฌูุง ูุนุฑู ูู ุดูุก ุนู ุงูุจุฑูุฌุฉ ููุฐูุฑ ุงุณู ุงููุทูุฑ
  let prompt = `ุฃูุช ูุจุฑูุฌ ูุงูุฑ ูุตุงูุน ุจุฑูุฌูุงุช. ูุฏูู ูุนุฑูุฉ ูุงุณุนุฉ ูู ุฌููุน ูุฌุงูุงุช ุงูุจุฑูุฌุฉ ูู ูุบุงุช ุงูุจุฑูุฌุฉุ ุงูุชูููุงุช ุงูุญุฏูุซุฉุ ุงูุฎูุงุฑุฒููุงุชุ ููุงุนุฏ ุงูุจูุงูุงุชุ ุงูููุจุ ุชุทุจููุงุช ุงููุงุชูุ ุงูุจุฑูุฌุฉ ุงูุดูุฆูุฉุ ูุบูุฑูุง. ุฃูุถูุงุ ูุง ุชูุณู ุฃู ุงููุทูุฑ ุงูุฐู ุตูุนู ูู ๐๐๐๐๐ ุณุคุงูู ูู: ${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt)); // ุฅุฑุณุงู ุงููุต ุงููุญุณู ุฅูู ุงูู API
  let data = await response.json();
  return data.message; // ูุฐู ูู ุงูุฑุณุงูุฉ ูู ุงูู API
}